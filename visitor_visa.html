[custom_form type="visitor_visa" form_id="101"]
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<style>
    .error {
        color: red;
    }
</style>
<div class="text-center mb-4">
    <img src="https://admin.caseeasy.ca/content/logos/CCP2020805dcab8ec0d7a84948be42de8a0f058e84.png" class="img-fluid"
        style="max-height:100px">
</div>
<div class=" text-center mb-4">
    <h1 class="fs-1">Visitor Visa Assessment</h1>
    <p>Assessment to be used if you would like to apply for a visitor visa to Canada.</p>
</div>
<form id="customForm" method="post" action="<?php echo esc_url(admin_url('admin-ajax.php')); ?>">
    <input type="hidden" name="action" value="submit_custom_form">
    <div id="step1">
        <div class="p-4 border rounded">
            <div class="mb-3">
                <input type="text" id="first_name" name="first_name" class="form-control" placeholder="First Name">
                <span id="first_nameError" class="error"></span><br>
            </div>
            <div class="mb-3">
                <input type="text" id="last_name" name="last_name" class="form-control" placeholder="Last Name">
                <span id="last_nameError" class="error"></span><br>
            </div>
            <div class="mb-3">
                <input type="email" id="email" name="email" class="form-control" placeholder="Email">
                <span id="emailError" class="error"></span><br>
            </div>
            <div class="mb-3">
                <input type="text" id="phone" name="phone" class="form-control" placeholder="Phone">
                <span id="phoneError" class="error"></span><br>
            </div>
            <button type="button" id="continueToStep2" class="btn btn-outline-primary">Continue</button>
        </div>
    </div>

    <div id="step2">
        <div class="container">
            <h2>Profile Information</h2>
            <div class="mb-4">
                <div class="mb-3">
                    <label for="salutation" class="form-label">Salutation <span class="text-danger">*</span></label>
                    <select id="salutation" name="salutation" class="form-select">
                        <option value="">Choose</option>
                        <option value="Mr.">Mr.</option>
                        <option value="Ms.">Ms.</option>
                    </select>
                    <span id="salutation_Error" class="error"></span><br>
                </div>
                <div class="mb-3">
                    <label for="familyName" class="form-label">Family Name <span class="text-danger">*</span></label>
                    <input type="text" id="familyName" name="familyName" class="form-control"
                        placeholder="Enter your answer here...">
                    <span id="familyName_error" class="error"></span><br>
                </div>
                <div class="mb-3">
                    <label for="givenName" class="form-label">Given Name(s) <span class="text-danger">*</span></label>
                    <input type="text" id="givenName" name="givenName" class="form-control"
                        placeholder="Enter your answer here...">
                    <span id="givenName_error" class="error"></span><br>
                </div>

                <div class="mb-3">
                    <label for="dateOfBirth" class="form-label">Date of Birth <span class="text-danger">*</span></label>
                    <input type="date" id="dateOfBirth" name="dateOfBirth" class="form-control">
                    <span id="dateOfBirth_error" class="error"></span><br>
                </div>

                <div class="mb-4">
                    <label for="primaryLanguage" class="form-label">Primary Language Spoken <span
                            class="text-danger">*</span></label>
                    <select id="primaryLanguage" name="primaryLanguage" class="form-select"
                        onchange="hideNativeLanguage()">
                        <option value="">Choose</option>
                        <option value="English">English</option>
                        <option value="French">French</option>
                        <option value="Other">Other</option>
                    </select>
                    <span id="primaryLanguage_error" class="error"></span><br>
                </div>

                <div class="mb-4" id="nativeLanguageDiv">
                    <label for="nativeLanguage" id="native" class="form-label">Choose your Native language (if
                        'Other' was
                        selected
                        to
                        the previous question)</label>
                    <select id="nativeLanguage" name="nativeLanguage" class="form-select">
                        <option value="">Choose</option>
                        <option value="Ada">Ada</option>
                        <option value="Adama">Adama</option>
                        <option value="Afar">Afar</option>
                    </select>
                    <span id="nativeLanguage_error" class="error"></span><br>
                </div>

                <div class="mb-4">
                    <label for="preferredLanguage" class="form-label">What's your preferred language
                        for
                        email/chat
                        messages? <span class="text-danger">*</span></label>
                    <select id="preferredLanguage" name="preferredLanguage" class="form-select">
                        <option value="">Choose</option>
                        <option value="Ada">Ada</option>
                        <option value="Adama">Adama</option>

                    </select>
                    <span id="preferredLanguage_error" class="error"></span><br>
                </div>
                <div class="mb-3">
                    <label for="citizenship" class="form-label">Country of Citizenship <span
                            class="text-danger">*</span></label>
                    <select id="citizenship" name="citizenship" class="form-select">
                        <option value="">Choose</option>
                        <option value="Afghanistan">Afghanistan</option>

                        <var></var>
                    </select>
                    <span id="citizenship_error" class="error"></span><br>
                </div>
            </div>

            <div class="mb-4">
                <label for="countryOfResidence" class="form-label">Country of Residence <span
                        class="text-danger">*</span></label>
                <select id="countryOfResidence" name="countryOfResidence" class="form-select">
                    <option value="">Choose</option>
                    <option value="Afghanistan">Afghanistan</option>
                    <option value="Aland Island">Aland Island</option>
                </select>
                <span id="countryOfResidence_error" class="error"></span><br>
            </div>
            <div class="mb-4">
                <label for="currentAddress" class="form-label">Current Address <span
                        class="text-danger">*</span></label>
                <textarea id="currentAddress" name="currentAddress" class="form-control"
                    placeholder="Include: Street#, Street Name, City, Province/State/District, Country, Postal Code"
                    rows="3"></textarea>
                <span id="currentAddress_error" class="error"></span><br>
            </div>

            <div class="mb-4">
                <label for="phoneNo" class="form-label">Phone No. <span class="text-danger">*</span></label>
                <input type="text" id="phoneNo" name="phoneNo" class="form-control"
                    placeholder="Format: Country code - Phone number">
                <span id="phoneNo_error" class="error"></span><br>
            </div>

            <div class="mb-4">
                <label for="hearAboutUs" class="form-label">How did you hear about us? <span
                        class="text-danger">*</span></label>
                <select id="hearAboutUs" name="hearAboutUs" class="form-select" onchange="howhearAboutUs()">
                    <option value="">Choose</option>
                    <option value="Agent">Agent</option>
                    <option value="Client">Client</option>
                    <option value="Google">Google</option>
                    <option value="Facebook">Facebook</option>
                    <option value="Friend">Friend</option>
                    <option value="LinkedIn">LinkedIn</option>
                    <option value="Yahoo">Yahoo</option>
                    <option value="Other">Other</option>
                </select>
                <span id="hearAboutUs_error" class="error"></span><br>
            </div>
            <div id="referralCode1">
                <div class="mb-4">
                    <label for="referralCode" class="form-label">Referral Name/Code</label>
                    <input type="text" id="referralCode" name="referralCode" class="form-control"
                        placeholder="Enter your answer here...">
                    <span id="referralCode_error" class="error"></span><br>
                </div>
            </div>

            <div class="mb-4">
                <label for="acceptedSchool" class="form-label">Do you have a family member who is a
                    Canadian
                    citizen
                    or permanent resident and is 18 years or older? <span class="text-danger">*</span></label>
                <select id="acceptedSchool" name="acceptedSchool" class="form-select">
                    <option value="">Choose</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
                <span id="acceptedSchool_error" class="error"></span><br>
            </div>

            <div>
                <div class="mb-4">
                    <label for="hearAboutUs" class="form-label">How long are you planning to stay in
                        Canada?
                        <span class="text-danger">*</span></label>
                    <div class="mb-4">
                        <input type="radio" name="radiogroup" control-id="1" id="3defcad4-b01a-41d4-b10a-fc4a2a25c0a5_0"
                            value="Temporarily - less than 6 months">
                        <label class="user-control-value" for="3defcad4-b01a-41d4-b10a-fc4a2a25c0a5_0">Temporarily -
                            less than 6 months</label>

                    </div>

                    <div class="mb-4">
                        <input type="radio" name="radiogroup" control-id="1" id="3defcad4-b01a-41d4-b10a-fc4a2a25c0a5_1"
                            value="Temporarily - more than 6 months">
                        <label class="user-control-value" for="3defcad4-b01a-41d4-b10a-fc4a2a25c0a5_1">Temporarily -
                            more than 6 months</label>
                    </div>

                    <div class="mb-4">
                        <input type="radio" name="radiogroup" control-id="1" id="3defcad4-b01a-41d4-b10a-fc4a2a25c0a5_2"
                            value="Permanently">
                        <label class="user-control-value"
                            for="3defcad4-b01a-41d4-b10a-fc4a2a25c0a5_2">Permanently</label>
                    </div>
                </div>
                <span id="radioError" class="error"></span><br>
            </div>

            <div class="mb-4">
                <label for="maritalStatus" class="form-label">What is your marital status? <span
                        class="text-danger">*</span></label>
                <select id="maritalStatus" name="maritalStatus" class="form-select"
                    onchange="showAdditionalQuestions(this)">
                    <option value="">Choose</option>
                    <option value="Annulled Marriage">Annulled Marriage</option>
                    <option value="Common-Law">Common-Law</option>
                    <option value="Divorced">Divorced</option>
                    <option value="Legally Separated">Legally Separated</option>
                    <option value="Married">Married</option>
                    <option value="Never Married">Never Married</option>
                    <option value="Widowed">Widowed</option>
                </select>
                <span id="maritalStatus_error" class="error"></span><br>
            </div>

            <div class="mb-4" id="maritalSinceDiv">
                <label for="maritalSince" class="form-label">Married/common-Law since? <span
                        class="text-danger">*</span></label>
                <input type="date" id="maritalSince" name="maritalSince" class="form-control">
                <span id="maritalSinceDiv_error" class="error"></span><br>
            </div>

            <div class="mb-4" id="spouseCitizenDiv">
                <label for="spouseStatus" class="form-label">Is your spouse or common-law partner a
                    citizen or
                    permanent resident of Canada? <span class="text-danger">*</span></label>
                <select id="spouseStatus" name="spouseStatus" class="form-select">
                    <option value="">Choose</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
                <span id="spouseStatus_error" class="error"></span><br>
            </div>

            <div class="mb-4" id="spouseAccompanyDiv">
                <label for="spouseAccompany" class="form-label">Will your spouse or common-law
                    partner come with
                    you
                    to Canada? <span class="text-danger">*</span></label>
                <select id="spouseAccompany" name="spouseAccompany" class="form-select">
                    <option value="">Choose</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
                <span id="spouseAccompany_error" class="error"></span><br>
            </div>

            <div class="mb-4" id="previousVisitT">
                <label for="previousVisit" class="form-label">Have you or your spouse previously
                    visited Canada for work, travel, or study?</label>
                <select id="previousVisit" name="previousVisit" class="form-select" onchange="toggleDivs()">
                    <option value="">Choose</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
                <span id="previousVisit_error" class="error"></span><br>
            </div>


            <div class="mb-4" id="firstVisitYearR">
                <label for="firstVisitYear" class="form-label">When did you or your spouse first
                    enter
                    Canada</label>
                <input type="date" id="firstVisitYear" name="firstVisitYear" class="form-control">
                <span id="firstVisitYear_error" class="error"></span><br>
            </div>

            <div class="mb-4" id="otherStatusDetailsS">
                <label for="otherStatusDetails" class="form-label">What status did you enter as -
                    Student, Work
                    Permit, Visitor, Other?</label>
                <input type="text" id="otherStatusDetails" name="otherStatusDetails" class="form-control"
                    placeholder="Enter your answer here...">
                <span id="otherStatusDetails_error" class="error"></span><br>
            </div>


            <div class="mb-4" id="visitorVisaStatus">
                <label for="visitorVisaStatus" class="form-label">Do you or your spouse currently
                    have a Visitor
                    Visa to either the United States or United Kingdom?</label>
                <select id="visitorVisaStatus" name="visitorVisaStatus" class="form-select">
                    <option value="">Choose</option>
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
                <span id="visitorVisaStatus_error" class="error"></span><br>
            </div>

            <div id="additionalQuestions">
                <div class="mb-4">
                    <label for="preferredDestination" class="form-label">Where is your preferred
                        destination in
                        Canada? <span class="text-danger">*</span></label>
                    <select id="preferredDestination" name="preferredDestination" class="form-select">
                        <option value="">Choose</option>
                        <option value="Any">Any</option>
                        <option value="Alberta (AB)">Alberta (AB)</option>
                        <option value="British Columbia (BC)">British Columbia (BC)</option>
                        <option value="Manitoba (MB)">Manitoba (MB)</option>
                        <option value="New Brunswick (NB)">New Brunswick (NB)</option>
                        <option value="Newfoundland and Labrador (NL)">Newfoundland and Labrador
                            (NL)</option>
                        <option value="Northwest Territories (NT)">Northwest Territories (NT)
                        </option>
                        <option value="Nova Scotia (NS)">Nova Scotia (NS)
                        </option>
                        <option value="Nunavut (NU)">Nunavut (NU)</option>
                        <option value="Ontario (ON)">Ontario (ON)</option>
                        <option value="Prince Edward Island (PEI)">Prince Edward Island (PEI)
                        </option>
                        <option value="Quebec (QC)">Quebec (QC)</option>
                        <option value="Saskatchewan (SK)">Saskatchewan (SK)</option>
                        <option value="Yukon (YT)">Yukon (YT)</option>
                    </select>
                    <span id="preferredDestination_error" class="error"></span><br>
                </div>

                <div class="mb-4">
                    <label for="refusedApplication" class="form-label">Have you or your spouse (if
                        applicable)
                        ever
                        been refused for any type of application for any country or any province?
                        <span class="text-danger">*</span></label>
                    <select id="refusedApplication" name="refusedApplication" class="form-select">
                        <option value="">Choose</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <span id="refusedApplication_error" class="error"></span><br>
                </div>

                <div class="mb-4">
                    <label for="arrested" class="form-label">Have you or your spouse (if applicable)
                        ever been
                        arrested, detained, charged or convicted in any country in the past? <span
                            class="text-danger">*</span></label>
                    <select id="arrested" name="arrested" class="form-select">
                        <option value="">Choose</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <span id="arrested_error" class="error"></span><br>
                </div>

                <div class="mb-4">
                    <label for="previouslyApplied" class="form-label">Have you or your spouse (if
                        applicable)
                        previously applied for immigration or visa to Canada? <span class="text-danger">*</span></label>
                    <select id="previouslyApplied" name="previouslyApplied" class="form-select">
                        <option value="">Choose</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <span id="previouslyApplied_error" class="error"></span><br>
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <button type="button" id="previousToStep1" class="btn btn-outline-dark">Previous</button>
                <button type="button" id="continueToStep3" class="btn btn-outline-primary">Continue</button>
            </div>
        </div>
    </div>

    <div id="step3">
        <div class="container">
            <h2>Additional Information</h2>
            <div class="mb-4">
                <label for="otherStatusDetailss" class="form-label">Any further information?</label>
                <input type="text" id="otherStatusDetailss" name="otherStatusDetailss" class="form-control"
                    placeholder="Enter your answer here...">
                <span id="otherStatusDetailss_error" class="error"></span><br>
            </div>
            <div class="d-flex justify-content-between">
                <button type="button" id="previousToStep2" class="btn btn-outline-dark">Previous</button>
                <button type="button" id="submitForm" class="btn btn-primary">Submit</button>
            </div>
            <div id="waitMessage" class="text-info mt-2" style="display: none;">Please wait...</div>
            <div id="successMessage" class="text-success mt-2" style="display: none;">Mail sent successfully.</div>
        </div>
    </div>
</form>

<script type="text/javascript">

    function showAdditionalQuestions(select) {
        var maritalStatus = select.value;
        var maritalSinceDiv = document.getElementById("maritalSinceDiv");
        var spouseCitizenDiv = document.getElementById("spouseCitizenDiv");
        var spouseAccompanyDiv = document.getElementById("spouseAccompanyDiv");
        var previousVisitDiv = document.getElementById("previousVisitT");
        var firstVisitYearDiv = document.getElementById("firstVisitYearR");
        var otherStatusDetailsDiv = document.getElementById("otherStatusDetailsS");
        var visitorVisaStatusDiv = document.getElementById("visitorVisaStatus");
        var additionalQuestionsDiv = document.getElementById("additionalQuestions");

        if (maritalStatus === "Annulled Marriage" || maritalStatus === "Divorced" || maritalStatus === "Legally Separated" || maritalStatus === "Never Married" || maritalStatus === "Widowed") {
            maritalSinceDiv.style.display = "none";
            spouseCitizenDiv.style.display = "none";
            spouseAccompanyDiv.style.display = "none";
            previousVisitDiv.style.display = "none";
            firstVisitYearDiv.style.display = "none";
            otherStatusDetailsDiv.style.display = "none";
            visitorVisaStatusDiv.style.display = "none";
            additionalQuestionsDiv.style.display = "block";
        } else if (maritalStatus === "Common-Law" || maritalStatus === "Married" || maritalStatus === "") {
            maritalSinceDiv.style.display = "block";
            spouseCitizenDiv.style.display = "block";
            spouseAccompanyDiv.style.display = "block";
            previousVisitDiv.style.display = "block";
            firstVisitYearDiv.style.display = "block";
            otherStatusDetailsDiv.style.display = "block";
            visitorVisaStatusDiv.style.display = "block";
            additionalQuestionsDiv.style.display = "none";
        }
    }
    function hideNativeLanguage() {
        var primaryLanguage = document.getElementById("primaryLanguage");
        var nativeLanguageDiv = document.getElementById("nativeLanguageDiv");

        if (primaryLanguage.value === "English" || primaryLanguage.value === "French") {
            nativeLanguageDiv.style.display = "none";
        } else {
            nativeLanguageDiv.style.display = "block";
        }
    }


    function howhearAboutUs() {
        var hearAboutUs = document.getElementById("hearAboutUs");
        var referralCode1 = document.getElementById("referralCode1");
        console.log("hearAboutUs" + hearAboutUs);
        console.log("referralCode1" + referralCode1);
        if (hearAboutUs.value === "Google" || hearAboutUs.value === "Facebook" || hearAboutUs.value === "LinkedIn" || hearAboutUs.value === "Yahoo" || hearAboutUs.value === "Other") {
            referralCode1.style.display = "none";
        } else {
            referralCode1.style.display = "block";
        }
    }

    function toggleDivs() {
        var selectedValue = document.getElementById('previousVisit').value;

        if (selectedValue === "No") {
            document.getElementById('firstVisitYearR').style.display = 'none';
            document.getElementById('otherStatusDetailsS').style.display = 'none';
        } else {
            document.getElementById('firstVisitYearR').style.display = 'block';
            document.getElementById('otherStatusDetailsS').style.display = 'block';
        }
    }

    jQuery(document).ready(function ($) {
        // Initial setup to show only the first step
        $("#step1").show();
        $("#step2").hide();
        $("#step3").hide();

        // Click handler to move to step 2
        $("#continueToStep2").click(function () {
            if (validateStep1()) {
                $("#step1").hide();
                $("#step2").show();
            }
        });

        // Click handler to go back to step 1
        $("#previousToStep1").click(function () {
            $("#step2").hide();
            $("#step1").show();
        });

        // Click handler to move to step 3
        $("#continueToStep3").click(function () {
            if (validateStep2()) {
                $("#step2").hide();
                $("#step3").show();
            }
        });

        // Click handler to go back to step 2
        $("#previousToStep2").click(function () {
            $("#step3").hide();
            $("#step2").show();
        });

        // Submit the form when the last step's submit button is clicked
        $("#submitForm").click(function (e) {
            e.preventDefault(); // Prevent default form submission
            if (validateStep3()) {
                $("#waitMessage").show(); // Show wait message while AJAX request is in process

                // AJAX request to submit the form data
                $.ajax({
                    type: 'POST',
                    url: $('#customForm').attr('action'),
                    data: $('#customForm').serialize(),
                    success: function (response) {
                        console.log(response);
                        $("#waitMessage").hide(); // Hide wait message after response

                        // Convert serialized data to an object
                        let formData = new URLSearchParams($('#customForm').serialize());

                        // Convert formData to a plain object
                        let formDataObject = Object.fromEntries(formData.entries());

                        // Convert the formDataObject to JSON
                        let formDataJson = JSON.stringify(formDataObject, null, 2);

                        console.log("Form Data JSON:", formDataJson);
                        let firstName = formDataObject['first_name'] || '';
                        let lastName = formDataObject['last_name'] || '';
                        let email = formDataObject['email'] || '';
                        let phone = formDataObject['phone'] || '';
                        let dateOfBirth = formDataObject['dateOfBirth'] || '';
                        let maritalStatus = formDataObject['maritalStatus'] || '';
                        let citizenship = formDataObject['citizenship'] || '';
                        let primaryLanguage = formDataObject['primaryLanguage'] || '';
                        let currentAddress = formDataObject['currentAddress'] || '';

                        if (response.success) {
                            $("#successMessage").text(response.data.message).show();
                            sendData(firstName, lastName, email, phone, dateOfBirth, maritalStatus, citizenship, primaryLanguage, currentAddress); // Call the sendData function here
                        } else {
                            alert(response.data.message);
                        }
                    },

                    error: function (error) {
                        $("#waitMessage").hide(); // Hide wait message on error
                        alert('Form submission failed. Please try again.');
                    }
                });
            }
        });

        function validateStep1() {
            var first_name = $('#first_name').val();
            var last_name = $('#last_name').val();
            var email = $('#email').val();
            var phone = $('#phone').val();
            var isValid = true;

            if (first_name === "") {
                $("#first_nameError").text("First name is required");
                isValid = false;
            } else {
                $("#first_nameError").text("");
            }

            if (last_name === "") {
                $("#last_nameError").text("Last name is required");
                isValid = false;
            } else {
                $("#last_nameError").text("");
            }

            if (email === "") {
                $("#emailError").text("Email is required");
                isValid = false;
            } else {
                $("#emailError").text("");
            }

            if (phone === "") {
                $("#phoneError").text("Phone is required");
                isValid = false;
            } else {
                $("#phoneError").text("");
            }

            return isValid;
        }

        function validateStep2() {
            var salutation = $('#salutation').val();
            var familyName = $('#familyName').val();
            var givenName = $('#givenName').val();
            var dateOfBirth = $('#dateOfBirth').val();
            var primaryLanguage = $('#primaryLanguage').val();
            var nativeLanguage = $('#nativeLanguage').val();
            var preferredLanguage = $('#preferredLanguage').val();
            var citizenship = $('#citizenship').val();
            var countryOfResidence = $('#countryOfResidence').val();
            var currentAddress = $('#currentAddress').val();
            var phoneNo = $('#phoneNo').val();
            var hearAboutUs = $('#hearAboutUs').val();
            var acceptedSchool = $('#acceptedSchool').val();
            var maritalStatus = $('#maritalStatus').val();
            var isValid = true;

            if (salutation === '') {
                $('#salutation_Error').text('Salutation is required');
                isValid = false;
            } else {
                $('#salutation_Error').text('');
            }

            if (familyName === "") {
                $("#familyName_error").text("Family name is required");
                isValid = false;
            } else {
                $("#familyName_error").text("");
            }

            if (givenName === "") {
                $("#givenName_error").text("Given name(s) is required");
                isValid = false;
            } else {
                $("#givenName_error").text("");
            }

            if (dateOfBirth === "") {
                $("#dateOfBirth_error").text("Date of birth is required");
                isValid = false;
            } else {
                $("#dateOfBirth_error").text("");
            }

            if (primaryLanguage === "") {
                $("#primaryLanguage_error").text("Primary language is required");
                isValid = false;
            } else {
                $("#primaryLanguage_error").text("");
            }

            if (nativeLanguage === "" && (primaryLanguage!="English" && primaryLanguage!="French")) {
                $("#nativeLanguage_error").text("Native language is required");
                isValid = false;
            } else {
                $("#nativeLanguage_error").text("");
            }

            if (preferredLanguage === "") {
                $("#preferredLanguage_error").text("Preferred language is required");
                isValid = false;
            } else {
                $("#preferredLanguage_error").text("");
            }

            if (citizenship === "") {
                $("#citizenship_error").text("Citizenship is required");
                isValid = false;
            } else {
                $("#citizenship_error").text("");
            }

            if (countryOfResidence === "") {
                $("#countryOfResidence_error").text("Country of residence is required");
                isValid = false;
            } else {
                $("#countryOfResidence_error").text("");
            }

            if (currentAddress === "") {
                $("#currentAddress_error").text("Current address is required");
                isValid = false;
            } else {
                $("#currentAddress_error").text("");
            }

            if (phoneNo === "") {
                $("#phoneNo_error").text("Phone number is required");
                isValid = false;
            } else {
                $("#phoneNo_error").text("");
            }

            if (hearAboutUs === "") {
                $("#hearAboutUs_error").text("This field is required");
                isValid = false;
            } else {
                $("#hearAboutUs_error").text("");
            }

            if (acceptedSchool === "") {
                $("#acceptedSchool_error").text("Accepted school is required");
                isValid = false;
            } else {
                $("#acceptedSchool_error").text("");
            }

            if (maritalStatus === "") {
                $("#maritalStatus_error").text("Marital status is required");
                isValid = false;
            } else {
                $("#maritalStatus_error").text("");
            }

            // Validate radio button group (How long are you planning to stay in Canada?)
            if (!$("input[name='radiogroup']:checked").val()) {
                $("#radioError").text("Please select an option.");
                isValid = false;
            } else {
                $("#radioError").text("");
            }

            return isValid;
        }

        function validateStep3() {
            // Validation for Step 3 if needed
            return true;
        }
    });

    function sendData(firstName, lastName, email, phone, dateOfBirth, maritalStatus, citizenship, primaryLanguage, currentAddress) {
        console.log("sendData function is running");

        const url = 'https://apnaorganicstore.in/canjobs/employeePersonal_detail';
        const data = {
            "name": firstName + " " + lastName,
            "email": email,
            "contact_no": phone,
            "date_of_birth": dateOfBirth,
            "marital_status": maritalStatus,
            "current_location": currentAddress,
            "currently_located_country": citizenship,
            "language": primaryLanguage,
            "interested_in": "visitor visa",
            "resume": "data:application/pdf;base64,aHR0cHM6Ly9jYW5wYXRod2F5cy5zaGFyZXBvaW50LmNvbS9zaXRlcy9jYW5wYXRod2F5c2pvYnMvU2hhcmVkJTIwRG9jdW1lbnRzL2VtcGxveWVlX2RvY3VtZW50cy9uZXclMjB0ZXN0JTIwYXBwbGljYW50XzEwODUvdGVtcG9yYXJ5X3Jlc2lkZW50X3Zpc2EucGRm",
            "profile_photo": "",
            "status": "1",
            "reffer_by": 39,
            "assigned_by": "1",
            "permission": "{\"notification_permission\":{\"lmia\":1,\"visa\":1,\"interview\":1,\"job\":1},\"email_permission\":{\"lmia\":1,\"visa\":1,\"interview\":1,\"job\":1}}"
        };
        console.log(data);
        fetch(url, {
            method: 'PUT',
            headers: {
                "Content-Type": "application/json",
                type: "event",
            },
            body: JSON.stringify(data)
        })
            .then(response => response.text())
            .then(text => {
                try {
                    const jsonData = JSON.parse(text);
                    console.log('Success:', jsonData);
                } catch (error) {
                    console.error('Error parsing JSON:', error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>
[/custom_form]